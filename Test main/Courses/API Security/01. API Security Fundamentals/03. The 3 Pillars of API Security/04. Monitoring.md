##### [The 3 Pillars of API Security](https://university.apisec.ai/products/api-security-fundamentals/categories/2152504686)

![](https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/site/2147573912/products/e663b1c-a433-3354-3b1f-570d41624beb_65.jpg)

The third pillar we'll go through here is Monitoring. And this pillar is all about understanding how your APIs are performing and operating in production. We're looking at Runtime Protection - active protection of the APIs. This includes policy enforcement, requiring authentication of users to access endpoints, and filtering traffic. Maybe we need a geographic traffic filter. We're only expecting traffic from a certain region or IP address and so forth. So that's an aspect of runtime protection that you can implement. 

The next category is Threat Detection. How do we analyze the traffic to look for things like fraudulent transactions, fraudulent traffic, and distributed attacks coming from lots of different sources that are targeting similar resources - and you want to be alerted to that and make sure you're controlling it properly. And enable incident response - you could capture all the traffic, log it all, put it into a repository, and then retrace the steps to understand what happened. And finally then implement the appropriate mitigating controls for future similar attacks.

And then you want to Validate Controls to make sure that all the controls that you've implemented at the gateway, at the firewall, and in the application itself are functioning as designed. That there aren't any surprises happening in production that you weren't expecting. That you're finding any anomalies or unexpected traffic from going unnoticed and without control.

![](https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/site/2147573912/products/750d255-e5ff-714b-ddd-386ffe2c546f_66.jpg)

Now there are really two fundamental approaches to runtime monitoring. There's a Proactive Blocking approach, which you'll find with things like a gateway or a web application firewall. Here's where you can actually enforce policy. You can define in a gateway that certain endpoints are only accessible with valid authentication - and the gateway actually can perform the authentication. Or with a firewall you may want to implement rate limiting or IP whitelisting - and if the traffic doesn't match it gets blocked.

The other side is more of a Reactive, like Alerting mode. For monitoring here, you probably want to capture all the traffic, log it, put it into a SIEM (security information and event management) or a log management solution, or a runtime or API threat management tool. The issue here is you may not have enough context in order to make judgements about whether the traffic is legitimate or not. So you want to get alerted, you want to be notified, you want to be able to retrace steps because the last thing you want to do is block legitimate traffic. And there may be instances where there's just simply not enough context to be able to make a yes/no decision on it. So then implement alerting, and the ability to go back and understand the traffic, and maybe refine the rules for your inline, proactive technologies.

![](https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/site/2147573912/products/7ce36ab-6176-2bc0-05ad-f1fa76f620d2_67.jpg)

Another benefit of monitoring is to do API Discovery - to actually watch what's happening on the wire, on your network, to identify APIs that are in use and active on your network. This can be useful for generating that inventory, for discovering APIs that were undiscovered, for finding undocumented or unknown APIs, or unknown endpoints. But you need to be aware that this is not necessarily going to give you a complete view. If your goal is a comprehensive inventory of all your APIs, which it should be - to satisfy those governance requirements - you need to look well beyond network traffic monitoring. This is because APIs may exist within the firewall that are not necessarily seen by your monitoring tool. You should also scan code repositories to look for APIs, or crawling or app testing. That's how you're going to get a comprehensive view. And ultimately you want to enforce that all APIs are being managed centrally in something like an API gateway. 

The other limitation of discovery is if you're looking at network based discovery it's only going to see what it sees. If there are APIs that exist inside the firewall, on network segments that aren't monitored, you're not going to see them. If there are APIs that aren't being exercised or endpoints that aren't being touched, you're not going to see them. So you really want to have a more comprehensive approach to discovery and finding your entire API footprint.

![](https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/site/2147573912/products/d80a360-c32-ec7b-0660-0a624f6df3_68.jpg)

The other limitations on monitoring we've talked about is visibility. It's very appealing to think that you can insert something in-line that will protect you from all sorts of threats. But the reality is live traffic has very limited context. If you look at, say, the Coinbase example, where user A was trading crypto on behalf of user B. An inline tool will only see an HTTP request that identifies a source account, a destination account and some other transaction details. But it's very unlikely that there's going to be knowledge at the inline tool level to know if that's a legitimate transaction - whether that source account or destination account belongs to the user that is requesting it. That's why we implement Authorization at the application logic level. That's where the context exists to know if Dan is accessing Dan's records or is he accessing Jeff's. Inline tools are great for monitoring but are very likely to miss a lot of active attacks.

So you want to make sure to simulate attacks to find where those vulnerabilities are before they go live and to implement the appropriate corrections. The other thing about monitoring is in many cases, many API monitoring technologies may require sharing your traffic data with third parties. That may be a violation of privacy and can cause bandwidth concerns or even latency. These are things to be aware of when you're looking at monitoring capabilities.